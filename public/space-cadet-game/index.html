
<!doctypehtml>
    <html lang=en-us>

    <head>
        <meta charset=utf-8>
        <meta content="text/html; charset=utf-8" http-equiv=Content-Type>
        <title>3D Pinball for Windoge XP - Space Cadet</title>
        <style>
            :root{--ActiveBorder:rgb(212, 208, 200);--ActiveTitle:rgb(10, 36, 106);--AppWorkspace:rgb(128, 128, 128);--Background:rgb(58, 110, 165);--ButtonAlternateFace:rgb(192, 192, 192);--ButtonDkShadow:rgb(64, 64, 64);--ButtonFace:rgb(212, 208, 200);--ButtonHilight:rgb(255, 255, 255);--ButtonLight:rgb(212, 208, 200);--ButtonShadow:rgb(128, 128, 128);--ButtonText:rgb(0, 0, 0);--GradientActiveTitle:rgb(166, 202, 240);--GradientInactiveTitle:rgb(192, 192, 192);--GrayText:rgb(128, 128, 128);--Hilight:rgb(10, 36, 106);--HilightText:rgb(255, 255, 255);--HotTrackingColor:rgb(0, 0, 128);--InactiveBorder:rgb(212, 208, 200);--InactiveTitle:rgb(128, 128, 128);--InactiveTitleText:rgb(212, 208, 200);--InfoText:rgb(0, 0, 0);--InfoWindow:rgb(255, 255, 225);--Menu:rgb(212, 208, 200);--MenuBar:rgb(192, 192, 192);--MenuHilight:rgb(0, 0, 128);--MenuText:rgb(0, 0, 0);--Scrollbar:rgb(212, 208, 200);--TitleText:rgb(255, 255, 255);--Window:rgb(255, 255, 255);--WindowFrame:rgb(0, 0, 0);--WindowText:rgb(0, 0, 0)}body{font-family:Tahoma,Geneva,Verdana,sans-serif;background-color:#0831d9;text-align:center}textarea.emscripten{font-family:monospace;width:80%}canvas.emscripten{border:0 none;background-color:#000}.titlebar{text-align:start;margin:0;padding:1px;position:relative;overflow:hidden;display:flex;user-select:none}.titlebar .titlebar-icon{width:16px;height:16px;padding:1px}.titlebar .titlebar-title{display:flex;padding:0 2px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;flex-grow:1;font-weight:700;align-items:center}.titlebar .titlebar-wincontrols{display:inline-block;margin:0;padding:1px;min-width:fit-content}.titlebar-wincontrols .buttons-wrapper{display:inline-block;width:auto;margin:0;padding:1px}.titlebar-wincontrols .spacer{display:inline-block;margin:0;padding:0;width:2px}.titlebar-wincontrols .button{display:inline-block;min-width:12px;min-height:10px;width:12px;height:10px;text-align:center;vertical-align:middle;line-height:10px}.window{font-size:8pt;color:var(--WindowText);background-color:var(--ButtonFace);padding-right:0;margin-left:auto;margin-right:auto;display:inline-block}.window.active{}.window.active .titlebar .titlebar-icon{background-color:var(--ActiveTitle);color:var(--TitleText)}.window.active .titlebar .titlebar-title{background-color:var(--ActiveTitle);background-image:linear-gradient(to right,var(--ActiveTitle),var(--GradientActiveTitle));color:var(--TitleText)}.window.active .titlebar .titlebar-wincontrols,.window.active .titlebar .titlebar-wincontrols .buttons-wrapper{background-color:var(--GradientActiveTitle);font-size:8pt;font-weight:700}.button{margin:2px}.button span.button-content{display:inline-block}.button:active .button-content{transform:translate(1px,1px)}.button{background-color:var(--ButtonFace);color:var(--ButtonText);box-shadow:-.5px -.5px 0 .5px var(--ButtonLight),0 0 0 1px var(--ButtonShadow),-.5px -.5px 0 1.5px var(--ButtonHilight),0 0 0 2px var(--ButtonDkShadow)}.button:active{box-shadow:-.5px -.5px 0 .5px var(--ButtonShadow),0 0 0 1px var(--ButtonShadow),-.5px -.5px 0 1.5px var(--WindowFrame),0 0 0 2px var(--WindowFrame)}.button svg path{fill:var(--ButtonText)}.titlebar .button:active{box-shadow:-.5px -.5px 0 .5px var(--ButtonShadow),0 0 0 1px var(--ButtonLight),-.5px -.5px 0 1.5px var(--ButtonDkShadow),0 0 0 2px var(--ButtonHilight)}#status{margin:40px 32px}
        
            body {
                position: relative;
                padding-bottom: 80px;
                display: flex;
                justify-content: center;
            }
            #startOverlay {
               position: fixed;
               top: 0;
               left: 0;
               width: 100%;
               height: 100%;
               background: rgba(0, 0, 0, 0.75);
               color: white;
               display: flex;
               justify-content: center;
               align-items: center;
               font-size: 18px;
               z-index: 1000;

               -webkit-user-select: none; /* Safari */
                -moz-user-select: none; /* Firefox */
                -ms-user-select: none; /* IE 10+ */
                user-select: none; /* Standard syntax */
            }
            .controls-wrap {
                background: rgba(0, 0, 0, 0.8);
                padding: 25px 40px;
                border: 2px solid white;
            }
            .controls-wrap span {
                width: 110px;
                display:inline-block;
                text-align: center;
                margin-left: 30px;
            }
            .controls-wrap .keyboard-btn-wrap em {
                background-color: #eee;
                border-top: 0.2em solid #ccc;
                border-right: 0.3em solid #aaa;
                border-bottom: 0.35em solid #888;
                border-left: 0.25em solid #bbb;
                padding: 0 0.4em 0.1em 0.3em;
                white-space: nowrap;
                line-height: 2.6em !important;
                color: #000;
                font-style: normal;
            }
            .controls-wrap .keyboard-btn-wrap {
                width: 50px;
                display: inline-block;
                text-align: center;
            }
            .button-control {
                display: none;
                position: absolute;
                top: 100%;
                margin-top: -4px;
                left: 0;
                width: 33.3%;
                background: #000;
                color: #fff;
                border: none;
                height: 140px;
                text-transform: uppercase;
                font-weight: 500;
                font-size: 32px;

                -webkit-user-select: none; /* Safari */
                -moz-user-select: none; /* Firefox */
                -ms-user-select: none; /* Internet Explorer/Edge */
                user-select: none; /* Non-prefixed version */
            }
            .button-control.active {
                display: block !important;
            }
            #sound-btn {
                width: 50%;
                left: 50%;
                bottom: 100%;
                top: auto;
                font-size: 16px;
                height: 44px;
            }
            #reset-btn {
                width: 50%;
                font-size: 16px;
                left: 0;
                bottom: 100%;
                top: auto;
                height: 44px;
            }
            #z-btn {
                left: 0;
            }
            #space-btn {
                left: 33.3%;
            }
            #slash-btn {
                left: 66.6%;
            }
        </style>
    </head>

    <body>
        <div id="startOverlay">
            <div>
                <p style="text-align: center; font-size: 12px;" class="controls-wrap">
                    <span style="margin-bottom: 20px; font-size: 14px; width: 100%; text-align: center; margin-left: 0;">Keyboard Controls</span> <br>
                    <span class="keyboard-btn-wrap"><em>Z</em></span> <span>Left Flipper</span><br>
                    <span class="keyboard-btn-wrap"><em>/</em></span> <span>Right Flipper</span><br>
                    <span class="keyboard-btn-wrap"><em>X</em></span> <span>Left table bump</span><br>
                    <span class="keyboard-btn-wrap"><em>.</em></span> <span>Right table bump</span><br>
                    <span class="keyboard-btn-wrap"><em>â†‘</em></span> <span>Bottom table bump</span><br>
                    <span class="keyboard-btn-wrap"><em>M</em></span> <span>Sound</span><br>
                    <span class="keyboard-btn-wrap"><em>Space</em></span> <span>Plunger</span><br>
                </p>
                    
                <p style="margin-top: 20px; padding-bottom: 20px; text-transform: uppercase; letter-spacing: 3px;">Click to start</p>   
            </div> 
        </div>
        <div class="active window cadet-game-window">
            <style>
                #windogePinballoverlay {
                	  position: absolute;
                  right: 16px;
                  top: 30px;
                  width: 197px;
                }
                
                 .active.window { position: relative; }
                 .titlebar{display: none}
            </style> <img id="windogePinballoverlay" src="space-cadoge-pinball.png" />
            <div class=titlebar><span class=titlebar-title>3D Pinball for Windoge XP - Space Cadet</span>
                <div class=titlebar-wincontrols>
                    <ul class=buttons-wrapper>
                        <li class="button minimize"><svg class="button-content replaced-svg" height=0.104181in width=0.125017in xmlns=http://www.w3.org/2000/svg viewBox="0 0 12 10">
                                <path d="M 2.00,7.00            C 2.00,7.00 8.00,7.00 8.00,7.00              8.00,7.00 8.00,9.00 8.00,9.00              8.00,9.00 2.00,9.00 2.00,9.00              2.00,9.00 2.00,7.00 2.00,7.00 Z" fill=black id=Minimize stroke-width=0 stroke=black></path>
                            </svg></li>
                        <li class="button maximize"><svg class="button-content replaced-svg" height=0.104181in width=0.125017in xmlns=http://www.w3.org/2000/svg viewBox="0 0 12 10">
                                <path d="M 2.00,2.00            C 2.00,2.00 9.00,2.00 9.00,2.00              9.00,2.00 9.00,8.00 9.00,8.00              9.00,8.00 2.00,8.00 2.00,8.00              2.00,8.00 2.00,2.00 2.00,2.00 Z            M 1.00,0.00            C 1.00,0.00 1.00,9.00 1.00,9.00              1.00,9.00 10.00,9.00 10.00,9.00              10.00,9.00 10.00,0.00 10.00,0.00              10.00,0.00 1.00,0.00 1.00,0.00 Z" fill=black id=Maximize stroke-width=0 stroke=black></path>
                            </svg></li>
                        <li class=spacer></li>
                        <li class="button close"><svg class="button-content replaced-svg" height=10 width=12 xmlns=http://www.w3.org/2000/svg version=1.1 xmlns:svg=http://www.w3.org/2000/svg>
                                <g id=layer1 transform=translate(0,-1042.3622)>
                                    <path d="m 2.0025485,1043.3853 2.0198115,0 0,1.0185 0.984011,0 0,0.984 1.985286,0 0,-0.984 1.001274,0 0,-1.0185 2.002548,0 0,1.0013 0,0 0,0 -1.001274,0 0,1.0012 -1.001274,0 0,0.9841 -1.001274,0 0,1.0012 1.001274,0 0,1.0013 1.001274,0 0,1.0013 1.001274,0 0,1.0013 -2.002548,0 0,-1.0013 -1.001274,0 0,-0.984 -1.985286,0 0,0.984 -1.001274,0 0,1.0013 -2.0025485,0 0,-1.0013 1.0012745,0 0,-1.0013 1.001274,0 0,-1.0013 1.001274,0 0,-1.0012 -1.001274,0 0,-0.9841 -1.001274,0 0,-1.0012 -1.0012745,0 0,-1.0186 z" fill=black id=Close stroke-width=0></path>
                                </g>
                            </svg></li>
                    </ul>
                </div>
            </div>
            <div class=emscripten id=status>Downloading...</div>
            <div class=emscripten><progress hidden id=progress max=100 value=0></progress></div><canvas class=emscripten id=canvas oncontextmenu=event.preventDefault() style=display:none tabindex=-1></canvas>
            <button class="button-control" id="z-btn"><</button>
            <button class="button-control" id="slash-btn">></button>
            <button class="button-control" id="space-btn">Hold</button>
            <button class="button-control" id="reset-btn">New Game</button>
            <button class="button-control" id="sound-btn">Sound On/Off</button>
        </div>
        <script>
            var statusElement=document.getElementById("status"),progressElement=document.getElementById("progress"),Module={preRun:[],postRun:[],print:function(){var e=document.getElementById("output");return e&&(e.value=""),function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments).join(" ")),console.log(e)}}(),printErr:function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments).join(" ")),console.error(e)},canvas:function(){var e=document.getElementById("canvas");return e.addEventListener("webglcontextlost",(function(e){alert("WebGL context lost. You will need to reload the page."),e.preventDefault()}),!1),e}(),setStatus:function(e){if(Module.setStatus.last||(Module.setStatus.last={time:Date.now(),text:""}),e!==Module.setStatus.last.text){var t=e.match(/([^(]+)\((\d+(\.\d+)?)\/(\d+)\)/),n=Date.now();if(!(t&&n-Module.setStatus.last.time<30)){if(Module.setStatus.last.time=n,Module.setStatus.last.text=e,t)e=t[1],progressElement.value=100*parseInt(t[2]),progressElement.max=100*parseInt(t[4]),progressElement.hidden=!1;else progressElement.value=null,progressElement.max=null,progressElement.hidden=!0,document.getElementById("canvas").style.display="";statusElement.innerHTML=e,""===e?(statusElement.style.display="none",progressElement.style.display="none"):(statusElement.style.display="",progressElement.style.display="")}}},totalDependencies:0,monitorRunDependencies:function(e){this.totalDependencies=Math.max(this.totalDependencies,e),Module.setStatus(e?"Preparing... ("+(this.totalDependencies-e)+"/"+this.totalDependencies+")":"All downloads complete.")}};Module.setStatus("Downloading..."),window.onerror=function(){Module.setStatus("Exception thrown, see JavaScript console"),Module.setStatus=function(e){e&&Module.printErr("[post-exception status] "+e)}}
        </script>
        <script>
         // Add event listeners for removing the 'Press any key to start' overlay
         function removeOverlayAndInitialize() {
             // Remove the overlay
             document.getElementById('startOverlay').remove();
             // Remove event listeners to prevent re-initialization
             document.removeEventListener('keydown', removeOverlayAndInitialize);
             document.removeEventListener('click', removeOverlayAndInitialize);
         }
 
         // Attach event listeners
         document.addEventListener('keydown', removeOverlayAndInitialize);
         document.addEventListener('click', removeOverlayAndInitialize);
     </script>
     <script>
        var isMuted = false;
        // Function to toggle mute/unmute
        function toggleMute() {
            // Get audio context from canvas
            let SDL2 = Module["SDL2"];

            isMuted = !isMuted;
            if (SDL2.audio.scriptProcessorNode) {
                if (isMuted) {
                    // Mute the audio by disconnecting the script processor node
                    SDL2.audio.scriptProcessorNode.disconnect();
                } else {
                    // Unmute the audio by reconnecting the script processor node
                    SDL2.audio.scriptProcessorNode.connect(SDL2.audioContext.destination);
                }
            }
        }

        // Function to handle key press events
        function handleKeyPress2(event) {
            // Check if the key pressed is 'm'
            if (event.key === 'm') {
                toggleMute();
            }
        }

        document.addEventListener('keypress', handleKeyPress2);
    </script>
    <script>
        function isMobileDevice() {
            return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        }

        // Function to dispatch keyboard event
    function dispatchKeyEvent(type, symbol, code, key) {
        const event = new KeyboardEvent(type, {
            'key': symbol,  // Specify the key you want to simulate
            'keyCode': code,
            'which': code,
            'code': key,
            'location': 0,
            'altKey': false,
            'ctrlKey': false,
            'metaKey': false,
            'shiftKey': false,
            'repeat': false,
            'bubbles': true,
            'cancelable': true
        });
        document.getElementsByTagName('canvas')[0].dispatchEvent(event)
    }

    if (!isMobileDevice()) {
        // Set padding-left to 15px
        document.body.style.paddingLeft = '15px';
    }

    document.addEventListener('DOMContentLoaded', (event) => {
        if(isMobileDevice()) {
            document.querySelectorAll('.button-control').forEach(function(element) {
                element.classList.add('active');
            });
            const zButton = document.getElementById('z-btn');
            const slashButton = document.getElementById('slash-btn');
            const spaceButton = document.getElementById('space-btn');
            const resetButton = document.getElementById('reset-btn');
            const soundButton = document.getElementById('sound-btn');

            resetButton.addEventListener('touchstart', function() {
                dispatchKeyEvent('keydown', 'F2', 113, 'F2');
            });
            resetButton.addEventListener('touchend', function() {
                dispatchKeyEvent('keyup', 'F2', 113, 'F2');
            });

            soundButton.addEventListener('click', function() {
                toggleMute();
            });

            zButton.addEventListener('touchstart', function() {
                dispatchKeyEvent('keydown', 'z', 90, 'KeyZ');
            });
            zButton.addEventListener('touchend', function() {
                dispatchKeyEvent('keyup', 'z', 90, 'KeyZ');
            });

            slashButton.addEventListener('touchstart', function() {
                dispatchKeyEvent('keydown', '/', 191, 'Slash');
            });
            slashButton.addEventListener('touchend', function() {
                dispatchKeyEvent('keyup', '/', 191, 'Slash');
            });

            spaceButton.addEventListener('touchstart', function() {
                dispatchKeyEvent('keydown', ' ', 32, 'Space');
            });
            spaceButton.addEventListener('touchend', function() {
                dispatchKeyEvent('keyup', ' ', 32, 'Space');
            });
        }
    });
    </script>
    <script>
        // Set interval to check the status periodically
        if(isMobileDevice()) {
            const intervalId = setInterval(() => {
                // Get the #status element
                const statusElement = document.querySelector('.cadet-game-window #status');
                if (statusElement && statusElement.textContent.trim() === '') {
                    // Game loaded, if mobile scale to fit...
                    const screenWidth = window.innerWidth;

                    // Define scale values for different screen width ranges
                    let scaleValue = 1;
                    if (screenWidth < 720 && screenWidth > 630) {
                    scaleValue = 0.9;
                    } else if (screenWidth <= 630 && screenWidth > 560) {
                    scaleValue = 0.8;
                    } else if (screenWidth <= 560 && screenWidth > 490) {
                    scaleValue = 0.7;
                    } else if (screenWidth <= 490 && screenWidth > 420) {
                    scaleValue = 0.6;
                    } else if (screenWidth <= 420 && screenWidth > 380) {
                    scaleValue = 0.55;
                    } else if (screenWidth <= 380) {
                    scaleValue = 0.5;
                    }

                    // Apply scale transformation to .cadet-game-window
                    const cadetGameWindow = document.querySelector('.cadet-game-window');
                    if (cadetGameWindow) {
                    cadetGameWindow.style.transform = `scale(${scaleValue})`;
                    }

                    // Stop the interval as the condition is met
                    clearInterval(intervalId);
                }
            }, 1000); // Check every second (you can adjust this value as needed)
        }
    </script>
        <script async src=SpaceCadetPinball.js></script><br>
    </body>

    </html>